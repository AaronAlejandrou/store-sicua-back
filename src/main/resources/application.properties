# ================================
# SICUA BACKEND CONFIGURATION
# Sistema de Inventario y Control de Ventas
# ================================

# ===== SERVER CONFIGURATION =====
server.port=8080
spring.application.name=sicua-backend

# ===== TIMEZONE CONFIGURATION =====
# Using local system timezone (Lima/Peru: UTC-5)
# Commented lines are for UTC deployment if needed
# spring.jpa.properties.hibernate.jdbc.time_zone=UTC
# spring.jackson.time-zone=UTC

# ===== DATABASE - SUPABASE POSTGRESQL =====
# Environment variables override defaults for security
# Production: Set SUPABASE_DB_URL, SUPABASE_DB_USERNAME, SUPABASE_DB_PASSWORD
spring.datasource.url=${SUPABASE_DB_URL:jdbc:postgresql://db.ihfgttlxsgusitlnhdkj.supabase.co:5432/postgres?sslmode=require}
spring.datasource.username=${SUPABASE_DB_USERNAME:postgres}
spring.datasource.password=${SUPABASE_DB_PASSWORD:sicua2025}
spring.datasource.driver-class-name=org.postgresql.Driver

# ===== JPA/HIBERNATE CONFIGURATION =====
# Auto DDL: Creates/updates tables automatically
spring.jpa.hibernate.ddl-auto=update
# Development: Show SQL queries in logs
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# PostgreSQL specific dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ===== DATABASE CONNECTION POOL =====
# HikariCP pool configuration for PostgreSQL
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.connection-timeout=20000

# ===== JSON SERIALIZATION =====
# Date handling: Use ISO format instead of timestamps
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.fail-on-empty-beans=false

# ===== CORS CONFIGURATION =====
# Frontend origins allowed to access this API  
# Development: localhost ports | Production: deployed URLs
sicua.cors.allowed-origins=http://localhost:3000,http://localhost:5173,https://store-sicua-vite-production.up.railway.app,https://sicua-frontend.up.railway.app

# ===== SESSION MANAGEMENT =====
# Session-based authentication configuration
server.servlet.session.cookie.name=JSESSIONID
server.servlet.session.cookie.http-only=false
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax
server.servlet.session.timeout=30m

# ===== API DOCUMENTATION =====
# Swagger/OpenAPI configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.swagger-ui.filter=true
springdoc.packages-to-scan=com.sicua.interfaces.rest
springdoc.paths-to-match=/api/**
